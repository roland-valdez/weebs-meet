<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!--Nav Starts Here-->
<div class="container"><div class="row">

    <nav class="navbar navbar-icon-top navbar-expand-lg row-cols-auto" th:fragment="navbar" style="justify-content: space-around">
        <div class="dropdown">


            <div sec:authorize="!isAuthenticated()">
                <button class="btn btn-primary dropdown-toggle signin-btn" id="myModal" type="button"
                        data-mdb-toggle="dropdown"
                        aria-expanded="false">
                    <div><i class="fas fa-book-reader" style="font-size: xx-large"></i></div>
                </button>
                <div class="dropdown-menu text-center mx-auto " style="width: 320px" id="loginDropdown">
                    <form class="px-4 py-3 mt-3 mx-auto" th:action="@{/}" th:method="post">
                        <!-- Username input -->

                        <div class="form-outline mb-4  text-center">
                            <input id="username" class="form-control" name="username" type="text"/>
                            <label class="form-label" for="username">Username</label>

                            <!-- Password input -->
                            <div class="form-outline mb-4  text-center">
                                <input type="password" id="password" name="password" class="form-control"/>
                                <label class="form-label" for="password">Password</label>
                            </div>
                            <!--						form notch for username-->
                            <div class=" form-notch">
                                <div class="form-notch-leading" style="width: 9px;"></div>
                                <div class="form-notch-middle" style="width: 62px;"></div>
                                <div class="form-notch-trailing"></div>
                            </div>
                        </div>
                        <!--					form notch for password-->
                        <div class=" form-notch">
                            <div class="form-notch-leading" style="width: 9px;"></div>
                            <div class="form-notch-middle" style="width: 60px;"></div>
                            <div class="form-notch-trailing"></div>
                        </div>
                        <!-- Submit button -->
                        <button type="submit" value="signIn" class="btn btn-primary btn-block text-center mr-2">Sign in
                        </button>
                        <div class="alert-danger mx-auto" th:if="${param.error}">
                            <script>
                                setTimeout(function () {
                                    $('#myModal').trigger('click');
                                }, 5);</script>
                            Invalid Username and Password
                        </div>
                    </form>
                    <div class="dropdown-divider"></div>
                    <button
                            type="button"
                            class="btn btn-primary text-center"
                            id="register-btn"
                            data-mdb-toggle="modal"
                            data-mdb-target="#registerModal"
                    >
                        New around here? Register!
                    </button>

                </div>
            </div>
        </div>


        <!--		<div class="btn-toolbar" >-->
        <div sec:authorize="isAuthenticated()">
            <a href="/" class="createButton">HOME</a>
            <a href="/create" class="createButton" style="border-left: 1px solid #4f4f4f">CREATE</a>
        </div>


        <div class="col-5 wrapper">

            <a href="/">
                <h1 class="annotation" style="text-align: center; font-size: 3.5vw ">Annotation Station</h1>
            </a>

        </div>


        <div>
            <div>

                <div sec:authorize="isAuthenticated()" style="display: none">
                    User ID: <span id="currentUser" th:text="${#authentication.principal.id}"/>
                </div>
                <div class="text-dark btn-group" style="box-shadow: none" sec:authorize="isAuthenticated()">
                    <a href="/collections/profile" style="border-right: 1px solid #4f4f4f" class="createButton"><span th:text="${#authentication.principal.username}"/></a>


                    <form class="text-center" style="align-self: center; padding: 0.46vw 1.6vw; font-size: 1vw" th:action="@{/logout}" th:method="post" sec:authorize="isAuthenticated()">
                        <button class="createButton" style="border: none; background-color: transparent; font-family: 'American Typewriter'">Logout</button>

                        <div th:if="${param.logout}">
                            You have been logged out.
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </nav>
</div>
</div>


</html>